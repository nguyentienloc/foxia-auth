#!/usr/bin/env node

const childProcess = require("child_process")
const os = require("os")

;[
  { command: "npx patch-package" },
  { command: "solidarity" },
]
  .filter(({ onlyPlatforms }) => !onlyPlatforms || onlyPlatforms.includes(os.platform()))
  .forEach((commandAndOptions) => {
    const { command, onlyPlatform: _, ...options } = commandAndOptions
    try {
      childProcess.execSync(command, {
        stdio: "inherit",
        ...options,
      })
    } catch (error) {
      process.exit(error.status)
    }
  })
